# create_templates.py
"""
åˆ›å»ºå¿…è¦çš„æ¨¡æ¿æ–‡ä»¶
"""

import os
import json

def create_template_directory():
    """åˆ›å»ºæ¨¡æ¿ç›®å½•å’Œæ–‡ä»¶"""
    
    templates_dir = "./templates"
    os.makedirs(templates_dir, exist_ok=True)
    
    # 1. å°è¯´ç±»å‹ä¸“ç”¨æ¨¡æ¿
    novel_type_templates = {
        "xuanhuan": {
            "name": "ç„å¹»å°è¯´æ¨¡æ¿",
            "description": "é€‚åˆç„å¹»å°è¯´çš„åˆ›ä½œæ¨¡æ¿",
            "worldview_elements": ["ä¿®çœŸç­‰çº§", "åŠŸæ³•ä½“ç³»", "å¦–å…½ç§ç±»", "ç§˜å¢ƒæ¢é™©", "å®—é—¨åŠ¿åŠ›"],
            "character_archetypes": ["åºŸæŸ´æµä¸»è§’", "å¤©æ‰é‡ç”Ÿ", "ç³»ç»Ÿæ‹¥æœ‰è€…", "è€æ€ªç‰©è½¬ä¸–"],
            "plot_patterns": ["é€€å©šæµ", "å®—é—¨å¤§æ¯”", "ç§˜å¢ƒå¤ºå®", "åŠ¿åŠ›äº‰éœ¸", "é£å‡æˆä»™"],
            "writing_tips": [
                "æ³¨é‡åŠ›é‡ä½“ç³»çš„å±‚æ¬¡æ„Ÿ",
                "å¼ºè°ƒå¥‡é‡å’Œæœºç¼˜çš„é‡è¦æ€§",
                "è¥é€ ç¥ç§˜è«æµ‹çš„æ°›å›´",
                "è®¾è®¡åä¸½çš„æˆ˜æ–—åœºé¢"
            ]
        },
        "xianxia": {
            "name": "ä»™ä¾ å°è¯´æ¨¡æ¿",
            "description": "é€‚åˆä»™ä¾ å°è¯´çš„åˆ›ä½œæ¨¡æ¿",
            "worldview_elements": ["ä»™ç•Œç­‰çº§", "ä¿®ä»™åŠŸæ³•", "æ³•å®çµå™¨", "å¤©åœ°çµæ°”", "å› æœè½®å›"],
            "character_archetypes": ["é€é¥æ•£ä»™", "å®—é—¨å¤©æ‰", "é­”é“ä¿®å£«", "è½¬ä¸–ä»™äºº"],
            "plot_patterns": ["æ¸¡åŠ«é£å‡", "æ–©å¦–é™¤é­”", "å¯»ä»™é—®é“", "å®—é—¨æ©æ€¨", "æƒ…åŠ«è€ƒéªŒ"],
            "writing_tips": [
                "èåˆé“å®¶æ€æƒ³å’Œä¼ ç»Ÿæ–‡åŒ–",
                "æ³¨é‡æ„å¢ƒå’Œæ–‡ç¬”çš„ä¼˜ç¾",
                "ä½“ç°ä¿®ä»™è€…çš„è¶…è„±å¿ƒå¢ƒ",
                "è®¾è®¡ç„å¦™çš„æ³•æœ¯å’Œé˜µæ³•"
            ]
        },
        "dushi": {
            "name": "éƒ½å¸‚å°è¯´æ¨¡æ¿",
            "description": "é€‚åˆéƒ½å¸‚å°è¯´çš„åˆ›ä½œæ¨¡æ¿",
            "worldview_elements": ["ç°ä»£éƒ½å¸‚", "å•†ä¸šç«äº‰", "ç¤¾ä¼šå…³ç³»", "èŒåœºè§„åˆ™", "éƒ½å¸‚ä¼ è¯´"],
            "character_archetypes": ["å•†ä¸šç²¾è‹±", "å¼‚èƒ½è€…", "é‡ç”Ÿè€…", "ç³»ç»Ÿå®¿ä¸»", "æ™®é€šä¸Šç­æ—"],
            "plot_patterns": ["å•†æˆ˜é£äº‘", "å¼‚èƒ½è§‰é†’", "é‡ç”Ÿé€†è¢­", "ç³»ç»Ÿä»»åŠ¡", "éƒ½å¸‚ä¿®ä»™"],
            "writing_tips": [
                "è´´è¿‘ç°å®ç”Ÿæ´»ï¼Œå¢å¼ºä»£å…¥æ„Ÿ",
                "åˆç†å¤„ç†è¶…ç°å®å…ƒç´ ",
                "æ³¨é‡äººç‰©å¿ƒç†æå†™",
                "å±•ç°ç°ä»£ç¤¾ä¼šçš„å¤æ‚æ€§"
            ]
        },
        "kehuan": {
            "name": "ç§‘å¹»å°è¯´æ¨¡æ¿",
            "description": "é€‚åˆç§‘å¹»å°è¯´çš„åˆ›ä½œæ¨¡æ¿",
            "worldview_elements": ["æœªæ¥ç§‘æŠ€", "æ˜Ÿé™…æ–‡æ˜", "äººå·¥æ™ºèƒ½", "å¤–æ˜Ÿç”Ÿç‰©", "æ—¶ç©ºç†è®º"],
            "character_archetypes": ["ç§‘å­¦å®¶", "å®‡èˆªå‘˜", "æœºæ¢°æ”¹é€ äºº", "å¤–æ˜Ÿè®¿å®¢", "AIç”Ÿå‘½"],
            "plot_patterns": ["æ˜Ÿé™…æ¢é™©", "æ–‡æ˜å†²çª", "æŠ€æœ¯é©å‘½", "æœ«æ—¥å±æœº", "æ—¶ç©ºç©¿è¶Š"],
            "writing_tips": [
                "æ³¨é‡ç§‘å­¦é€»è¾‘å’Œåˆç†æ€§",
                "åˆ›é€ ç‹¬ç‰¹çš„æŠ€æœ¯è®¾å®š",
                "æ¢è®¨ç§‘æŠ€ä¸ä¼¦ç†çš„å…³ç³»",
                "è¥é€ å®å¤§è€Œç»†è‡´çš„æœªæ¥ä¸–ç•Œ"
            ]
        }
    }
    
    for template_name, template_data in novel_type_templates.items():
        file_path = f"{templates_dir}/{template_name}.json"
        with open(file_path, 'w', encoding='utf-8') as f:
            json.dump(template_data, f, ensure_ascii=False, indent=2)
        print(f"âœ… åˆ›å»ºæ¨¡æ¿: {file_path}")
    
    # 2. å†™ä½œé£æ ¼æ¨¡æ¿
    writing_styles = {
        "humorous": {
            "name": "è½»æ¾å¹½é»˜é£æ ¼",
            "description": "ä»¥å¹½é»˜è¯™è°ä¸ºä¸»çš„å†™ä½œé£æ ¼",
            "characteristics": [
                "å¯¹è¯ç”ŸåŠ¨æœ‰è¶£",
                "æƒ…èŠ‚è®¾è®¡æœ‰ç¬‘ç‚¹",
                "äººç‰©æ€§æ ¼é²œæ˜å¤¸å¼ ",
                "å™äº‹èŠ‚å¥æ˜å¿«",
                "é€‚å½“ä½¿ç”¨ç½‘ç»œæµè¡Œè¯­"
            ],
            "sentence_patterns": [
                "ä»–æ‘¸äº†æ‘¸é¼»å­ï¼Œä¸€è„¸æ— è¾œåœ°è¯´...",
                "è¿™ç®€ç›´æ¯”ç™»å¤©è¿˜éš¾ï¼Œä¸è¿‡ä¸»è§’æ€»æœ‰åŠæ³•...",
                "çœ‹åˆ°è¿™ä¸€å¹•ï¼Œä¼—äººä¸ç¦å€’å¸ä¸€å£å‡‰æ°”...",
                "ä¿—è¯è¯´å¾—å¥½ï¼Œäººå€’éœ‰èµ·æ¥å–å‡‰æ°´éƒ½å¡ç‰™..."
            ],
            "avoid": [
                "è¿‡äºä¸¥è‚ƒçš„è¯´æ•™",
                "å†—é•¿çš„å¿ƒç†æå†™",
                "å¤æ‚çš„å¥å¼ç»“æ„",
                "å‹æŠ‘çš„æƒ…æ„Ÿæ°›å›´"
            ]
        },
        "serious": {
            "name": "ä¸¥è‚ƒæ­£å‰§é£æ ¼",
            "description": "ä»¥ä¸¥è‚ƒæ·±åˆ»ä¸ºä¸»çš„å†™ä½œé£æ ¼",
            "characteristics": [
                "å™äº‹åº„é‡æ²‰ç¨³",
                "é€»è¾‘ä¸¥è°¨åˆç†",
                "äººç‰©å¿ƒç†æå†™ç»†è…»",
                "ä¸»é¢˜æ·±åˆ»æœ‰å†…æ¶µ",
                "æ–‡ç¬”ä¼˜ç¾å…¸é›…"
            ],
            "sentence_patterns": [
                "å¤œå¹•ä½å‚ï¼Œä¸‡ç±ä¿±å¯‚ï¼Œåªæœ‰è¿œå¤„ä¼ æ¥å‡ å£°çŠ¬å ...",
                "ä»–æ²‰æ€è‰¯ä¹…ï¼Œç»ˆäºåšå‡ºäº†å†³å®š...",
                "å†å²çš„è½¦è½®æ»šæ»šå‘å‰ï¼Œæ— äººèƒ½å¤Ÿé˜»æŒ¡...",
                "åœ¨è¿™åœºå‘½è¿çš„åšå¼ˆä¸­ï¼Œæ¯ä¸ªäººéƒ½èº«ä¸ç”±å·±..."
            ],
            "avoid": [
                "è¿‡äºéšæ„çš„å£è¯­åŒ–è¡¨è¾¾",
                "ä¸åˆé€»è¾‘çš„æƒ…èŠ‚å‘å±•",
                "æµ…è–„çš„äººç‰©å¡‘é€ ",
                "è½»æµ®çš„å™äº‹æ€åº¦"
            ]
        }
    }
    
    for style_name, style_data in writing_styles.items():
        file_path = f"{templates_dir}/writing_style_{style_name}.json"
        with open(file_path, 'w', encoding='utf-8') as f:
            json.dump(style_data, f, ensure_ascii=False, indent=2)
        print(f"âœ… åˆ›å»ºå†™ä½œé£æ ¼æ¨¡æ¿: {file_path}")
    
    # 3. ç« èŠ‚ç»“æ„æ¨¡æ¿
    chapter_structures = {
        "standard": {
            "name": "æ ‡å‡†ç« èŠ‚ç»“æ„",
            "description": "é€‚ç”¨äºå¤§å¤šæ•°ç« èŠ‚çš„æ ‡å‡†ç»“æ„",
            "structure": [
                {"part": "å¼€åœº", "description": "å¼•å…¥æœ¬ç« åœºæ™¯å’Œäººç‰©", "suggested_percentage": 20},
                {"part": "å‘å±•", "description": "æ¨è¿›æƒ…èŠ‚ï¼Œå±•å¼€å†²çª", "suggested_percentage": 50},
                {"part": "é«˜æ½®", "description": "æœ¬ç« æœ€é‡è¦çš„æƒ…èŠ‚èŠ‚ç‚¹", "suggested_percentage": 20},
                {"part": "ç»“å°¾", "description": "æ€»ç»“æœ¬ç« ï¼Œé“ºå«ä¸‹ä¸€ç« ", "suggested_percentage": 10}
            ],
            "tips": [
                "å¼€åœºè¦å¿«é€Ÿå¸å¼•è¯»è€…",
                "å‘å±•éƒ¨åˆ†è¦ä¿æŒèŠ‚å¥",
                "é«˜æ½®éƒ¨åˆ†è¦æœ‰å†²å‡»åŠ›",
                "ç»“å°¾è¦ç»™è¯»è€…ç•™ä¸‹æœŸå¾…"
            ]
        },
        "dialogue_heavy": {
            "name": "å¯¹è¯ä¸ºä¸»ç« èŠ‚ç»“æ„",
            "description": "ä»¥å¯¹è¯æ¨åŠ¨æƒ…èŠ‚çš„ç« èŠ‚ç»“æ„",
            "structure": [
                {"part": "åœºæ™¯è®¾å®š", "description": "ç®€çŸ­æè¿°å¯¹è¯å‘ç”Ÿçš„åœ°ç‚¹", "suggested_percentage": 10},
                {"part": "å¯¹è¯å±•å¼€", "description": "æ ¸å¿ƒå¯¹è¯å†…å®¹", "suggested_percentage": 70},
                {"part": "åŠ¨ä½œæå†™", "description": "å¯¹è¯é—´éš™çš„äººç‰©åŠ¨ä½œ", "suggested_percentage": 15},
                {"part": "å¯¹è¯æ€»ç»“", "description": "å¯¹è¯çš„ç»“æœå’Œå½±å“", "suggested_percentage": 5}
            ],
            "tips": [
                "å¯¹è¯è¦ç¬¦åˆäººç‰©æ€§æ ¼",
                "é€šè¿‡å¯¹è¯æ¨è¿›æƒ…èŠ‚",
                "é€‚å½“æ·»åŠ åŠ¨ä½œå’Œè¡¨æƒ…æå†™",
                "é¿å…é•¿ç¯‡å¤§è®ºçš„ç‹¬ç™½"
            ]
        },
        "action_heavy": {
            "name": "åŠ¨ä½œä¸ºä¸»ç« èŠ‚ç»“æ„",
            "description": "ä»¥åŠ¨ä½œåœºæ™¯ä¸ºä¸»çš„ç« èŠ‚ç»“æ„",
            "structure": [
                {"part": "æˆ˜å‰å‡†å¤‡", "description": "æˆ˜æ–—å‰çš„æ°›å›´å’Œå‡†å¤‡", "suggested_percentage": 20},
                {"part": "æˆ˜æ–—å¼€å§‹", "description": "æˆ˜æ–—çˆ†å‘ï¼ŒåŒæ–¹äº¤æ‰‹", "suggested_percentage": 30},
                {"part": "æˆ˜æ–—é«˜æ½®", "description": "æˆ˜æ–—æœ€æ¿€çƒˆçš„éƒ¨åˆ†", "suggested_percentage": 40},
                {"part": "æˆ˜æ–—ç»“æœ", "description": "æˆ˜æ–—ç»“æŸå’Œç»“æœ", "suggested_percentage": 10}
            ],
            "tips": [
                "åŠ¨ä½œæå†™è¦æ¸…æ™°æœ‰åº",
                "æ³¨æ„æˆ˜æ–—çš„é€»è¾‘æ€§",
                "é€‚å½“åŠ å…¥å¿ƒç†æå†™",
                "æ§åˆ¶æˆ˜æ–—çš„èŠ‚å¥å’Œå¼ åŠ›"
            ]
        }
    }
    
    for structure_name, structure_data in chapter_structures.items():
        file_path = f"{templates_dir}/chapter_structure_{structure_name}.json"
        with open(file_path, 'w', encoding='utf-8') as f:
            json.dump(structure_data, f, ensure_ascii=False, indent=2)
        print(f"âœ… åˆ›å»ºç« èŠ‚ç»“æ„æ¨¡æ¿: {file_path}")
    
    # 4. æç¤ºè¯æ¨¡æ¿æ–‡ä»¶
    prompt_templates = {
        "outline": """
è¯·åŸºäºä»¥ä¸‹åˆ›æ„ç”Ÿæˆå°è¯´å¤§çº²ï¼š

åˆ›æ„æè¿°ï¼š{creative_input}
å°è¯´ç±»å‹ï¼š{novel_type}
ç›®æ ‡å­—æ•°ï¼š{target_words}å­—
å†™ä½œé£æ ¼ï¼š{writing_style}

è¦æ±‚ï¼š
1. ç”Ÿæˆå®Œæ•´çš„ä¸‰å¹•å¼ç»“æ„
2. åŒ…å«ä¸»è¦æƒ…èŠ‚è½¬æŠ˜ç‚¹
3. æ˜ç¡®æ ¸å¿ƒå†²çªå’Œä¸»é¢˜
4. åˆ—å‡ºä¸»è¦äººç‰©å’Œå…³ç³»
5. è§„åˆ’æƒ…èŠ‚å‘å±•èŠ‚å¥

è¯·ä»¥JSONæ ¼å¼è¿”å›ï¼š
{{
    "title": "å°è¯´æ ‡é¢˜",
    "theme": "æ ¸å¿ƒä¸»é¢˜",
    "summary": "æ•…äº‹æ¢—æ¦‚",
    "structure": {{
        "act1": "ç¬¬ä¸€å¹•å†…å®¹",
        "act2": "ç¬¬äºŒå¹•å†…å®¹",
        "act3": "ç¬¬ä¸‰å¹•å†…å®¹"
    }},
    "key_plot_points": ["æƒ…èŠ‚ç‚¹1", "æƒ…èŠ‚ç‚¹2", "æƒ…èŠ‚ç‚¹3"],
    "main_characters": ["äººç‰©1", "äººç‰©2", "äººç‰©3"],
    "estimated_chapters": é¢„ä¼°ç« èŠ‚æ•°
}}
""",
        "character": """
è¯·ä¸ºä»¥ä¸‹å°è¯´å¤§çº²ç”Ÿæˆè¯¦ç»†çš„äººç‰©è®¾å®šï¼š

å¤§çº²ï¼š{outline}
ç”Ÿæˆäººç‰©æ•°é‡ï¼š{character_count}

è¦æ±‚æ¯ä¸ªäººç‰©åŒ…å«ï¼š
1. å§“åã€å¹´é¾„ã€æ€§åˆ«ã€å¤–è²Œç‰¹å¾
2. èº«ä»½èƒŒæ™¯å’Œå‡ºèº«
3. æ€§æ ¼ç‰¹ç‚¹ï¼ˆæ˜¾æ€§å’Œéšæ€§ï¼‰
4. æ ¸å¿ƒåŠ¨æœºå’Œç›®æ ‡
5. èƒ½åŠ›ç‰¹é•¿å’Œå¼±ç‚¹
6. æˆé•¿å¼§çº¿å’Œå‘å±•æ–¹å‘
7. ä¸å…¶ä»–äººç‰©å…³ç³»

è¯·ä»¥JSONæ•°ç»„æ ¼å¼è¿”å›ã€‚
""",
        "chapter": """
è¯·ç”Ÿæˆä»¥ä¸‹ç« èŠ‚çš„å†…å®¹ï¼š

ç« èŠ‚ä¿¡æ¯ï¼š
- ç« èŠ‚ç¼–å·ï¼š{chapter_number}
- æ‰€å±å¹•ï¼š{act}
- ç›®æ ‡å­—æ•°ï¼š{target_words}å­—
- ç« èŠ‚æ¦‚è¦ï¼š{chapter_outline}

å°è¯´ä¸Šä¸‹æ–‡ï¼š
- å¤§çº²ï¼š{novel_outline}
- ç›¸å…³äººç‰©ï¼š{relevant_characters}
- æœ€è¿‘æƒ…èŠ‚ï¼š{recent_events}
- å½“å‰æƒ…èŠ‚çº¿ï¼š{current_plots}

å†™ä½œè¦æ±‚ï¼š
1. ä¿æŒäººç‰©æ€§æ ¼å’Œè¡Œä¸ºä¸€è‡´æ€§
2. æ¨è¿›å½“å‰æ´»è·ƒçš„æƒ…èŠ‚çº¿
3. é€‚å½“åŸ‹è®¾åç»­ä¼ç¬”
4. æ§åˆ¶ç« èŠ‚èŠ‚å¥å’Œå¼ åŠ›
5. ç¡®ä¿æ–‡é£ä¸æ•´ä½“ä¸€è‡´

è¯·ç”Ÿæˆå®Œæ•´çš„ç« èŠ‚å†…å®¹ã€‚
""",
        "worldview": """
è¯·ä¸ºä»¥ä¸‹å°è¯´è®¾å®šè¯¦ç»†çš„ä¸–ç•Œè§‚ï¼š

å°è¯´ä¿¡æ¯ï¼š
- æ ‡é¢˜ï¼š{title}
- ç±»å‹ï¼š{novel_type}
- ä¸»é¢˜ï¼š{theme}

å¤§çº²æ¦‚è¦ï¼š{outline_summary}

è¦æ±‚æ„å»ºçš„ä¸–ç•Œè§‚åŒ…æ‹¬ï¼š
1. åŸºæœ¬è®¾å®šï¼ˆæ—¶ä»£ã€åœ°åŸŸã€æ–‡æ˜ç­‰ï¼‰
2. åŠ›é‡ä½“ç³»ï¼ˆå¦‚æœæœ‰ï¼‰
3. ç¤¾ä¼šç»“æ„å’Œç»„ç»‡
4. æ–‡åŒ–é£ä¿—å’Œä¿¡ä»°
5. å†å²èƒŒæ™¯å’Œä¼ è¯´
6. ç‰¹æ®Šè§„åˆ™å’Œé™åˆ¶
7. é‡è¦åœ°ç‚¹å’ŒåŠ¿åŠ›

è¯·ä»¥ç»“æ„åŒ–çš„JSONæ ¼å¼è¿”å›ã€‚
"""
    }
    
    for prompt_name, prompt_content in prompt_templates.items():
        file_path = f"{templates_dir}/prompt_{prompt_name}.txt"
        with open(file_path, 'w', encoding='utf-8') as f:
            f.write(prompt_content.strip())
        print(f"âœ… åˆ›å»ºæç¤ºè¯æ¨¡æ¿: {file_path}")
    
    print(f"\nğŸ‰ æ‰€æœ‰æ¨¡æ¿æ–‡ä»¶åˆ›å»ºå®Œæˆï¼å…±åˆ›å»ºäº† {len(os.listdir(templates_dir))} ä¸ªæ¨¡æ¿æ–‡ä»¶ã€‚")

if __name__ == "__main__":
    create_template_directory()